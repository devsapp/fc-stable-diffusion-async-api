"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[491],{68996:function(L,c,e){e.d(c,{r:function(){return g}});var f=e(97857),u=e.n(f),t=e(86074);function g(v){var l=v.disabled,E=v.children,O=v.message;return(0,t.jsxs)("div",{style:u()({position:"relative"},l?{cursor:"not-allowed",display:"block",maxHeight:"100vh",overflow:"hidden"}:{}),children:[l&&(0,t.jsx)("div",{style:{position:"absolute",fontWeight:"bold",zIndex:1,transform:"translate(0, -50%)",top:"50%",left:0,right:0,textAlign:"center"},children:O||"\u60A8\u672A\u6302\u8F7D NAS\uFF0C\u65E0\u6CD5\u5F00\u542F\u6587\u4EF6\u7BA1\u7406\u529F\u80FD\u3002"}),(0,t.jsx)("div",{style:l?{pointerEvents:"none",filter:"opacity(0.5) grayscale(1)"}:{},children:E})]})}},78364:function(L,c,e){e.r(c),e.d(c,{default:function(){return S}});var f=e(15009),u=e.n(f),t=e(99289),g=e.n(t),v=e(77348),l=e(62435),E=e(88830),O={"xterm-wrapper":"xterm-wrapper___flXbs"},A=e(12617),b=e(83204);function I(){var m=l.useMemo(function(){return new A.FitAddon},[]);return b.Z("resize",function(){try{m==null||m.fit()}catch(a){console.error(a)}}),m}var n=e(66898),_=e(42075),P=e(71577),W=e(89629),p=e(68996),h=e(86074),G=new TextEncoder;function y(){var m,a=l.useRef(null),i=l.useCallback(function(r){var o,s=(o=a.current)===null||o===void 0?void 0:o.terminal;s&&s.write(r)},[a]),j=I(),T=v.Z("".concat(location.protocol.replace("http","ws"),"//").concat(location.host,"/api/terminal"),{onOpen:function(){i(`\r
`),i(`\x1B[1;31m\u8BE5\u9875\u9762\u53EF\u80FD\u4F1A\u5BFC\u81F4\u60A8\u7684\u5E94\u7528\u6545\u969C\u3001NAS \u6587\u4EF6\u635F\u574F\uFF0C\u8BF7\u786E\u4FDD\u60A8\u5DF2\u77E5\u6653\u81EA\u5DF1\u547D\u4EE4\u7684\u540E\u679C\uFF0C\u9020\u6210\u7684\u635F\u5931\u9700\u8981\u60A8\u81EA\u884C\u627F\u62C5\x1B[0m\r
`),i(`\r
`),i(`\x1B[1;33m\u8BE5\u9875\u9762\u4F1A\u4FDD\u6301\u6301\u7EED\u8FDE\u63A5\uFF0C\u8FD9\u4F1A\u5BFC\u81F4\u6301\u7EED\u8BA1\u8D39\uFF0C\u8BF7\u52FF\u957F\u671F\u505C\u7559\u5728\u8BE5\u9875\u9762\x1B[0m \r
`),i(`\r
`),i(`\x1B[1;33m\u5F53\u524D\u60A8\u8FDB\u5165\u7684\u5B9E\u4F8B\u5E76\u975E SD \u8FD0\u884C\u7684 GPU \u5B9E\u4F8B\uFF0C\u60A8\u53EF\u4EE5\u5728\u5F53\u524D\u5B9E\u4F8B\u5185\u5B89\u88C5\u6587\u4EF6\u3001\u4F9D\u8D56\uFF0C\u901A\u8FC7 NAS \u5171\u4EAB\u81F3 SD \u4E2D\uFF0C\u8BE6\u60C5\u8BF7\u67E5\u770B\u6587\u6863\x1B[0m \r
`),i(`\r
`),i(`\r
`)},onClose:function(){},onMessage:function(){var r=g()(u()().mark(function s(D){var x;return u()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,D.data.text();case 2:x=R.sent,(x[0]===""||x[0]==="")&&i(x.slice(1));case 4:case"end":return R.stop()}},s)}));function o(s){return r.apply(this,arguments)}return o}(),onError:function(o,s){console.error(o,s)},reconnectLimit:0}),C=T.sendMessage,B=T.connect,M=T.readyState,d=l.useCallback(function(r){M===n.kQ.Open&&(C==null||C(r))},[C,M]);return l.useEffect(function(){var r,o,s,D;j.fit(),d==null||d(G.encode("\0".concat(a==null||(r=a.current)===null||r===void 0||(o=r.terminal)===null||o===void 0?void 0:o.cols,",").concat(a==null||(s=a.current)===null||s===void 0||(D=s.terminal)===null||D===void 0?void 0:D.rows)))},[(m=a.current)===null||m===void 0?void 0:m.terminal,j,d]),(0,h.jsx)("div",{className:"full-width",children:(0,h.jsx)(p.r,{disabled:M!==n.kQ.Open,message:(0,h.jsxs)(_.Z,{direction:"vertical",children:[(0,h.jsx)("span",{style:{color:"white"},children:M===n.kQ.Closed?"\u94FE\u63A5\u5DF2\u5173\u95ED":M===n.kQ.Closing?"\u6B63\u5728\u5173\u95ED\u8FDE\u63A5":M===n.kQ.Connecting?"\u8FDE\u63A5\u4E2D":""}),(0,h.jsx)(P.ZP,{onClick:B,children:"\u91CD\u65B0\u8FDE\u63A5"})]}),children:(0,h.jsx)(E.O,{ref:a,className:O["xterm-wrapper"],addons:[j],onResize:function(o){var s=o.cols,D=o.rows;j.fit(),d==null||d(G.encode("\0".concat(s,",").concat(D)))},onData:function(o){d==null||d(G.encode("".concat(o)))}})})})}var U=e(55617);function S(){return(0,U.Q4)(U.Zl.PAGE_TERMINAL),(0,h.jsx)(y,{})}},70507:function(L,c,e){var f=e(50942),u=e(6154);u.Z.interceptors.response.use(function(t){return t},function(t){return t.response&&(t.response.status===401&&f.m8.push("/login"),t.response.status!==200)?t.response:Promise.reject(t)}),c.Z=u.Z},55617:function(L,c,e){e.d(c,{Q4:function(){return b},Zl:function(){return E},_2:function(){return O},fX:function(){return I}});var f=e(15009),u=e.n(f),t=e(99289),g=e.n(t),v=e(62435),l=e(70507),E;(function(n){n.PAGE_INFO="page_info",n.PAGE_SD="page_sd",n.PAGE_FILEMGR="page_filemgr",n.PAGE_MODEL="page_model",n.PAGE_TERMINAL="page_terminal",n.PAGE_LORA="page_lora",n.PAGE_DOCUMENT="page_document",n.PAGE_UPLOAD="page_upload",n.CHANGE_SIDEMENU="change_sidemenu",n.TRY_MODEL="try_model",n.DOWNLOAD_MODEL="download_model",n.UPLOAD_ERROR="upload_error"})(E||(E={}));function O(n,_){return A.apply(this,arguments)}function A(){return A=g()(u()().mark(function n(_,P){return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!window.ENABLE_COLLECT){p.next=3;break}return p.next=3,l.Z.post("/collect/tracker",[{key:_,payload:P,ts:Date.now(),source:"filemgr"}]);case 3:case"end":return p.stop()}},n)})),A.apply(this,arguments)}function b(n,_){v.useEffect(function(){O(n,_)},[])}function I(n){var _=n.key,P=n.payload;b(_,P)}}}]);
