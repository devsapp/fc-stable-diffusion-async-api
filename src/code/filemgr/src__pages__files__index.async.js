"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[448],{38183:function(Et,oe,a){a.r(oe),a.d(oe,{default:function(){return pt}});var Re=a(9783),Y=a.n(Re),Ze=a(97857),R=a.n(Ze),pe=a(15009),y=a.n(pe),Ee=a(99289),D=a.n(Ee),Se=a(5574),Z=a.n(Se),P=a(61039),te=a(85504),ce=a(3991),ne=a(22821),$e=a(83204),E=a(33009),b=a(42075),I=a(29209),g=a(62435),Pe=a(68996),be=a(92380),Be=a(93613),De=a(26911),de=a(19478),fe=a(57132),he=a(48689),we=a(43384),ke=a(75081),Ae=a(71230),re=a(15746),ve=a(63232),Le=a(36147),X=a(82424),w=a(71577),ge=a(76306),Te=a(93179),ze={"vertical-center":"vertical-center___gvLOV"},e=a(86074);function Ie(t){return(0,e.jsx)("div",{className:ze["vertical-center"],children:t.children})}var Oe=(0,g.memo)(Ie),Me=a(23430);function Ne(t){var r=t.path;return(0,e.jsx)("a",{href:(0,P.MB)(r),target:"_blank",rel:"noreferrer",children:(0,e.jsx)(w.ZP,{icon:(0,e.jsx)(Me.Z,{}),type:"text",title:"\u4E0B\u8F7D"})})}var Ue=a(13769),N=a.n(Ue),qe=a(77123),A=a(79531),M=a(68797),Ve=["path","beforeRequest","afterRequest","loading"];function He(t){var r=t.path,i=t.beforeRequest,l=t.afterRequest,x=t.loading,C=N()(t,Ve),f=g.useState(""),d=Z()(f,2),j=d[0],m=d[1];return g.useEffect(function(){return m(r)},[r]),(0,e.jsx)(M.Q,{modalProps:{title:"\u91CD\u547D\u540D\u6587\u4EF6",okText:"\u91CD\u547D\u540D",okButtonProps:{loading:x}},buttonProps:R()({title:"\u91CD\u547D\u540D",icon:(0,e.jsx)(qe.Z,{}),type:"text",loading:x},C),beforeRequest:i,afterRequest:l,request:D()(y()().mark(function v(){return y()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.jW)(r,j);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},v)})),children:(0,e.jsx)(A.Z,{value:j,onChange:function(c){var u;return m((c==null||(u=c.target)===null||u===void 0?void 0:u.value)||"")},style:{width:"100%"}})})}var B=a(53371),me=a(27461);function Qe(t){var r=t.file,i=t.beforeRequest,l=t.afterRequest,x=t.loading,C=g.useState(""),f=Z()(C,2),d=f[0],j=f[1],m=g.useState(""),v=Z()(m,2),c=v[0],u=v[1];return g.useEffect(function(){j(r.path),u("".concat((0,B.XP)(r.path)))},[r.path]),(0,e.jsx)(M.Q,{buttonProps:{icon:(0,e.jsx)(me.Z,{}),disabled:!r.name.endsWith(".zip"),type:"text",title:"\u89E3\u538B\u6587\u4EF6",loading:x},modalProps:{title:"\u89E3\u538B\u6587\u4EF6",okText:"\u89E3\u538B",okButtonProps:{loading:x}},request:D()(y()().mark(function s(){return y()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,P.Ri)(d,c);case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},s)})),beforeRequest:i,afterRequest:l,children:(0,e.jsxs)(b.Z,{direction:"vertical",style:{width:"100%"},children:[(0,e.jsx)(X.Z.Text,{children:"\u9009\u62E9\u89E3\u538B\u5230\u7684\u76EE\u5F55"}),(0,e.jsx)(A.Z,{addonBefore:"\u8981\u89E3\u538B\u7684\u6587\u4EF6",value:d,onChange:function(n){var o;return j((n==null||(o=n.target)===null||o===void 0?void 0:o.value)||"")},disabled:!0}),(0,e.jsx)(A.Z,{addonBefore:"\u89E3\u538B\u5230\u6587\u4EF6\u5939",value:c,onChange:function(n){var o;return u((n==null||(o=n.target)===null||o===void 0?void 0:o.value)||"")}})]})})}var We={item:"item___RAKFG"};function Ge(t){var r=t.path,i=ce.Z(D()(y()().mark(function m(){return y()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,P.RN)(r);case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},m)})),{manual:!0}),l=i.data,x=i.loading,C=i.run,f=g.useMemo(function(){return r.split(".").pop()||""},[r]),d=g.useMemo(function(){return{js:"javascript",css:"css",py:"python",ts:"typescript",tsx:"typescript",htm:"html",md:"markdown",sh:"bash"}[f]||f},[f]),j=g.useMemo(function(){return["jpg","jpeg","png","bmp","svg","svgz","gif","ico","icon","webp"].indexOf(f)!==-1},[f]);return g.useEffect(function(){j===!1&&C()},[j,C]),j?(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsx)(we.Z,{src:(0,P.MB)(r),style:{height:"70vh"}})}):(0,e.jsx)(ke.Z,{spinning:x,children:(0,e.jsx)("div",{style:{maxHeight:"70vh",overflow:"auto"},children:(0,e.jsx)(Te.Z,{language:d,children:(l!=null&&l.success?l==null?void 0:l.preview:l==null?void 0:l.errMsg)||""})})})}function Ke(t){var r=t.file,i=t.run,l=t.currentPath,x=t.showDirSize,C=t.loading,f=t.setLoading,d=t.setLoadingFinished,j=t.setCache,m=t.selected,v=t.onSelect;return(0,e.jsxs)(Ae.Z,{style:{width:"100%"},children:[(0,e.jsx)(re.Z,{span:1,children:(0,e.jsx)(Oe,{children:(0,e.jsx)(ve.Z,{checked:m,onChange:function(u){var s;return v(u==null||(s=u.target)===null||s===void 0?void 0:s.checked)}})})}),(0,e.jsx)(re.Z,{span:17,children:(0,e.jsx)("div",R()(R()({className:We.item},r.is_dir?{onClick:function(){i("".concat(l.replace(/([/ ]*)$/g,""),"/").concat(r.name))}}:{onClick:function(){Le.Z.info({title:r.name,content:(0,e.jsx)(Ge,{path:r.path}),width:"80vw",closable:!0,maskClosable:!0,okButtonProps:{style:{display:"none"}}})}}),{},{children:(0,e.jsxs)(X.Z.Text,{ellipsis:{tooltip:r.name},style:{width:"70%"},children:[r.is_dir?(0,e.jsx)(Be.Z,{style:{marginRight:"1em",color:"#869aa4"}}):(0,e.jsx)(De.Z,{style:{marginRight:"1em",color:"#869aa4"}}),r.name]})}))}),(0,e.jsx)(re.Z,{span:6,children:(0,e.jsxs)(b.Z,{align:"center",style:{justifyContent:"end",width:"100%"},children:[(x||!r.is_dir)&&(0,be.t)(r.size),!r.is_dir&&(0,e.jsx)(Qe,{file:r,loading:C,beforeRequest:f,afterRequest:function(u,s){u?E.Z.success({message:"\u89E3\u538B\u6210\u529F"}):E.Z.error({message:"\u89E3\u538B\u5931\u8D25",description:s}),d(),i(l)}}),!r.is_dir&&(0,e.jsx)(Ne,{path:r.path}),(0,e.jsx)(w.ZP,{icon:(0,e.jsx)(de.Z,{}),type:"text",title:"\u526A\u5207",onClick:function(){j({file:[r.path],type:"cut"})}}),(0,e.jsx)(w.ZP,{icon:(0,e.jsx)(fe.Z,{}),type:"text",title:"\u590D\u5236",onClick:function(){j({file:[r.path],type:"copy"})}}),(0,e.jsx)(He,{path:r.path,loading:C,beforeRequest:f,afterRequest:function(u,s){u?E.Z.success({message:"\u91CD\u547D\u540D\u6210\u529F"}):E.Z.error({message:"\u91CD\u547D\u540D\u5931\u8D25",description:s}),d(),i(l)}}),(0,e.jsx)(ge.Z,{title:"\u786E\u8BA4\u5220\u9664\u6587\u4EF6?",description:(0,e.jsxs)(X.Z.Text,{children:["\u6587\u4EF6",(0,e.jsx)(X.Z.Text,{code:!0,style:{margin:"0 0.5em"},children:r.name}),"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D"]}),onConfirm:D()(y()().mark(function c(){var u;return y()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f(),n.prev=1,n.next=4,(0,P.Yd)(r.path);case 4:u=n.sent,u.success||E.Z.error({message:"\u5220\u9664\u6587\u4EF6\u9519\u8BEF",description:u.errMsg}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),E.Z.error({message:"\u672A\u77E5\u9519\u8BEF",description:"".concat(n.t0)});case 11:d(),i(l);case 13:case"end":return n.stop()}},c,null,[[1,8]])})),children:(0,e.jsx)(w.ZP,{icon:(0,e.jsx)(he.Z,{}),danger:!0,type:"text",title:"\u5220\u9664"})})]})})]})}var Ye=a(86548),Xe=a(87740),Je=a(71965),ae=a(82404),xe={item:"item___h1Ndq"};function _e(t){var r=t.currentPath,i=r===void 0?"/":r,l=t.setCurrentPath,x=t.loading,C=g.useState(!1),f=Z()(C,2),d=f[0],j=f[1],m=g.useState(""),v=Z()(m,2),c=v[0],u=v[1],s=g.useMemo(function(){return(i||"/").split("/").filter(Boolean)},[i]);return(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:8},children:[(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:8,width:"100%"},children:[(0,e.jsx)("div",{style:{flex:d?"auto":"unset"},children:d?(0,e.jsx)(A.Z,{value:c,onChange:function(o){var h;return u((o==null||(h=o.target)===null||h===void 0?void 0:h.value)||"")},onBlur:function(){l(c),j(!1)},onKeyDown:function(o){o.keyCode===13&&(l(c),j(!1))},className:"full-width"}):(0,e.jsxs)(ae.Z,{children:[(0,e.jsx)(ae.Z.Item,{onClick:function(){return l("/")},className:xe.item,children:"\u6839\u76EE\u5F55"}),s.map(function(n,o){return(0,e.jsx)(ae.Z.Item,{onClick:function(){return l("/".concat(s.slice(0,o+1).join("/")))},className:xe.item,children:n},o)})]})}),(0,e.jsx)("div",{style:{flex:"0 0 0"},children:(0,e.jsx)(Ye.Z,{style:{marginRight:4,cursor:"pointer"},onClick:function(){u(i),j(!0)}})})]}),(0,e.jsxs)(b.Z,{children:[(0,e.jsx)(w.ZP,{type:"primary",icon:(0,e.jsx)(Xe.Z,{}),loading:x,onClick:function(){return l(i||"/")}}),(0,e.jsx)(w.ZP,{icon:(0,e.jsx)(Je.Z,{}),loading:x,onClick:function(){return l(i.split("/").reverse().slice(1).reverse().join("/")||"/")}})]})]})}var et=a(51904),tt=a(83266),nt=["dir","beforeRequest","afterRequest","loading"];function rt(t){var r=t.dir,i=t.beforeRequest,l=t.afterRequest,x=t.loading,C=N()(t,nt),f=g.useMemo(function(){return(0,B.Dy)(r,"/","newfolder_".concat(Date.now()%1e3))},[r]),d=g.useState(""),j=Z()(d,2),m=j[0],v=j[1];return g.useEffect(function(){v(f)},[f]),(0,e.jsx)(M.Q,{modalProps:{title:"\u65B0\u5EFA\u6587\u4EF6\u5939",okText:"\u521B\u5EFA",okButtonProps:{loading:x}},buttonProps:R()({icon:(0,e.jsx)(tt.Z,{}),title:"\u65B0\u5EFA\u6587\u4EF6\u5939",children:"\u65B0\u5EFA\u6587\u4EF6\u5939",loading:x},C),beforeRequest:i,afterRequest:l,request:D()(y()().mark(function c(){return y()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,P.L6)(m);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},c)})),children:(0,e.jsx)(A.Z,{value:m,onChange:function(u){var s;return v((u==null||(s=u.target)===null||s===void 0?void 0:s.value)||"")},style:{width:"100%"}})})}var at=a(56334),ut=["pasteType","src","dstDir","loading","beforeRequest","afterRequest"];function st(t){var r=t.pasteType,i=t.src,l=t.dstDir,x=t.loading,C=t.beforeRequest,f=t.afterRequest,d=N()(t,ut),j=g.useState(""),m=Z()(j,2),v=m[0],c=m[1];return g.useEffect(function(){return c((0,B.Dy)(l,(0,B.Us)((i==null?void 0:i[0])||"")))},[l,i]),(0,e.jsx)(M.Q,{modalProps:{title:"".concat(r==="copy"?"\u590D\u5236":r==="cut"?"\u79FB\u52A8":"\u7C98\u8D34","\u6587\u4EF6"),okText:"\u7C98\u8D34",okButtonProps:{loading:x}},buttonProps:R()({title:"\u7C98\u8D34",children:"\u7C98\u8D34",icon:(0,e.jsx)(at.Z,{}),loading:x},d),beforeRequest:C,afterRequest:f,request:D()(y()().mark(function u(){var s;return y()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(i.length!==1){o.next=6;break}return o.next=3,(r==="cut"?P.jW:P.cy)(i[0],v);case 3:return o.abrupt("return",o.sent);case 6:return o.next=8,Promise.all(i.map(function(h){return(r==="cut"?P.jW:P.cy)(h,(0,B.Dy)(l,(0,B.Us)(h)))}));case 8:if(s=o.sent,!s.every(function(h){return h.success})){o.next=11;break}return o.abrupt("return",{success:!0});case 11:return o.abrupt("return",{success:!1,errMsg:s.filter(function(h){return!h.success}).map(function(h){return h.success?"":h==null?void 0:h.errMsg}).join(`
`)});case 12:case"end":return o.stop()}},u)})),children:i.length===1?(0,e.jsxs)(b.Z,{direction:"vertical",style:{width:"100%"},children:[(0,e.jsx)(A.Z,{value:i,disabled:!0,style:{width:"100%"},addonBefore:"\u539F\u59CB\u6587\u4EF6"}),(0,e.jsx)(A.Z,{addonBefore:"\u76EE\u6807\u6587\u4EF6",value:v,onChange:function(s){var n;return c((s==null||(n=s.target)===null||n===void 0?void 0:n.value)||"")},style:{width:"100%"}})]}):(0,e.jsx)(I.Z,{header:(0,e.jsx)("b",{children:"\u6587\u4EF6\u5217\u8868"}),style:{maxHeight:200,overflow:"auto",margin:20},size:"small",dataSource:i,renderItem:function(s){return(0,e.jsx)(I.Z.Item,{children:s})}})})}var it=["files","beforeRequest","afterRequest","loading"];function lt(t){var r=t.files,i=t.beforeRequest,l=t.afterRequest,x=t.loading,C=N()(t,it);return(0,e.jsx)(M.Q,{modalProps:{title:"\u5220\u9664\u6587\u4EF6",okText:"\u786E\u8BA4\u5220\u9664",okButtonProps:{danger:!0,type:"primary",loading:x}},buttonProps:R()({icon:(0,e.jsx)(he.Z,{}),title:"\u6279\u91CF\u5220\u9664",children:"\u6279\u91CF\u5220\u9664",danger:!0,loading:x},C),beforeRequest:i,afterRequest:l,request:D()(y()().mark(function f(){var d;return y()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all(r.map(function(){var v=D()(y()().mark(function c(u){return y()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,P.Yd)(u);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},c)}));return function(c){return v.apply(this,arguments)}}()));case 2:if(d=m.sent,!d.every(function(v){return v.success})){m.next=5;break}return m.abrupt("return",{success:!0});case 5:return m.abrupt("return",{success:!1,errMsg:d.filter(function(v){return!v.success}).map(function(v){return v.success?"":v==null?void 0:v.errMsg}).join(`
`)});case 6:case"end":return m.stop()}},f)})),children:(0,e.jsx)(I.Z,{header:(0,e.jsx)("b",{children:"\u5220\u9664\u6587\u4EF6\u5217\u8868"}),style:{maxHeight:200,overflow:"auto",margin:20},size:"small",dataSource:r,renderItem:function(d){return(0,e.jsx)(I.Z.Item,{children:d})}})})}var ot=a(19632),je=a.n(ot),ct=a(4393),dt=a(26981),ue=a(43331),ft=a(64082),ht=a(31365);function vt(t){var r=t.folder,i=ne.Z(!1),l=Z()(i,2),x=l[0],C=l[1],f=C.setTrue,d=C.setFalse,j=g.useContext(te._);return(0,e.jsx)(b.Z,{direction:"vertical",style:{width:"100%"},styles:{item:{width:"100%"}},children:(0,e.jsxs)(ht.Z.Dragger,{disabled:x,showUploadList:!1,multiple:!0,customRequest:function(){var m=D()(y()().mark(function v(c){var u,s,n;return y()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(c.file){h.next=2;break}return h.abrupt("return");case 2:u=c.file,s=u.name,f(),n=new ue.Vz(u,r?(0,B.Dy)(r,s):s),n.run(),j.setCtx(function(F){return R()(R()({},F),{},{tasks:[].concat(je()((F==null?void 0:F.tasks)||[]),[n])})}),E.Z.success({message:"\u5F00\u59CB\u4E0A\u4F20 ".concat((0,B.Us)(s))}),d();case 10:case"end":return h.stop()}},v)}));return function(v){return m.apply(this,arguments)}}(),children:[(0,e.jsx)(ft.Z,{style:{fontSize:18,marginRight:"0.5em"}}),"\u62D6\u62FD\u6216\u9009\u62E9\u6587\u4EF6\uFF0C\u652F\u6301\u591A\u9009\u3002\u5982\u679C\u9700\u8981\u4E0A\u4F20\u6587\u4EF6\u5939\u8BF7\u538B\u7F29\u4E3A zip \u540E\u4E0A\u4F20\u3002"]})})}var gt=a(25864),Ce=a(50888),Fe=a(88484);function mt(t){var r=t.folder,i=t.url,l=t.filename,x=t.region,C=t.unzip,f=C===void 0?!1:C,d=g.useState(i||""),j=Z()(d,2),m=j[0],v=j[1],c=g.useState(""),u=Z()(c,2),s=u[0],n=u[1];g.useEffect(function(){n((0,B.Dy)(r,""))},[r]);var o=ne.Z(!1),h=Z()(o,2),F=h[0],W=h[1],U=W.setTrue,se=W.setFalse,J=g.useMemo(function(){return s.trim()?r||/^(\/mnt\/.+)|(^\/tmp\/.+)/.test(s)?"":"\u6587\u4EF6\u53EA\u5141\u8BB8\u4E0A\u4F20\u81F3 /mnt/ \u53CA /tmp/ \u76EE\u5F55":"\u6587\u4EF6\u540D\u4E0D\u80FD\u4E3A\u7A7A"},[s]),q=g.useMemo(function(){return m.indexOf("oss-".concat(x,".aliyuncs.com"))!==-1?m.replace("oss-".concat(x,".aliyuncs.com"),"oss-".concat(x,"-internal.aliyuncs.com")):""},[m]),_=g.useState(!1),G=Z()(_,2),ie=G[0],p=G[1];g.useEffect(function(){q&&p(!0)},[q]);var le=g.useContext(te._);return(0,e.jsxs)(b.Z,{direction:"vertical",style:{width:"100%"},children:[(0,e.jsx)(ge.Z,{title:"\u662F\u5426\u5207\u6362\u4E3A\u963F\u91CC\u4E91\u5185\u7F51\u94FE\u63A5\uFF1F",description:(0,e.jsxs)("span",{children:["\u8FD9\u53EF\u4EE5\u907F\u514D\u4EA7\u751F\u6D41\u91CF\u8D39\u7528\uFF0C\u5E76\u4E14\u52A0\u5FEB\u4E0B\u8F7D\u901F\u5EA6\u3002",(0,e.jsx)("br",{}),"\u5185\u7F51\u94FE\u63A5: ",q]}),trigger:[],open:ie,onCancel:function(){return p(!1)},onOpenChange:function(S){return p(S)},onConfirm:function(){v(q),p(!1)},children:(0,e.jsx)(A.Z,{addonBefore:"\u6587\u4EF6\u5730\u5740",value:m,disabled:F||!!i,placeholder:"https://xxxx.com/xxx.model",suffix:(0,e.jsx)("span",{children:F&&(0,e.jsx)(Ce.Z,{})}),onChange:function(S){var k;return typeof((k=S.target)===null||k===void 0?void 0:k.value)!="undefined"&&v(S.target.value.trim())}})}),(0,e.jsxs)(b.Z.Compact,{style:{width:"100%"},children:[(0,e.jsx)(A.Z,{value:s,disabled:F||!!l,addonBefore:"\u6587\u4EF6\u540D",suffix:(0,e.jsx)("span",{children:F&&(0,e.jsx)(Ce.Z,{})}),onChange:function(S){var k;return typeof((k=S.target)===null||k===void 0?void 0:k.value)!="undefined"&&n(S.target.value)},placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"}),(0,e.jsx)(w.ZP,{type:"primary",icon:(0,e.jsx)(Fe.Z,{}),disabled:F||!!J,onClick:D()(y()().mark(function T(){var S;return y()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:U(),S=new(f?ue.qU:ue.tw)(m,s),S.run(),le.setCtx(function($){return R()(R()({},$),{},{tasks:[].concat(je()(($==null?void 0:$.tasks)||[]),[S])})}),E.Z.success({message:"\u5F00\u59CB\u4E0B\u8F7D ".concat((0,B.Us)(s))}),se();case 6:case"end":return K.stop()}},T)})),children:"\u4E0A\u4F20"})]})]})}function St(t){var r=ahooks.useCounter(0),i=_slicedToArray(r,2),l=i[0],x=i[1].inc,C=React.useState([l]),f=_slicedToArray(C,2),d=f[0],j=f[1];return _jsx(Space,{direction:"vertical",style:{width:"100%"},children:_jsx(List,{style:{maxHeight:"60vh",overflow:"auto"},dataSource:d,header:_jsxs(Space,{direction:"horizontal",style:{width:"100%",justifyContent:"space-between"},align:"end",children:[_jsx("div",{children:t.extra}),_jsx(Button,{type:"primary",icon:_jsx(PlusOutlined,{}),onClick:function(){x(),j(function(v){return[].concat(_toConsumableArray(v),[l])})}})]}),renderItem:function(v){return _jsx(List.Item,{actions:[_jsx(Button,{icon:_jsx(DeleteOutlined,{}),danger:!0,onClick:function(){j(d.filter(function(u){return u!==v}))}})],children:t.children})}})})}function xt(t){var r=t.folder,i=t.region,l=t.extra,x=g.useState("chunk"),C=Z()(x,2),f=C[0],d=C[1];return(0,e.jsx)(ct.Z,{children:(0,e.jsxs)(b.Z,{direction:"vertical",style:{width:"100%"},children:[(0,e.jsx)(dt.Z,{activeKey:f,items:[{key:"chunk",label:"\u5206\u7247\u4E0A\u4F20",children:(0,e.jsx)(vt,{folder:r})},{key:"url",label:"\u79BB\u7EBF\u4E0A\u4F20",children:(0,e.jsx)(mt,{folder:r,region:i})}],onChange:d}),(0,e.jsx)("div",{style:{maxHeight:300,overflowY:"auto",padding:20,overflowX:"hidden"},children:(0,e.jsx)(gt.E,{})})]})})}var jt=["currentPath","region","run"];function Ct(t){var r=t.currentPath,i=t.region,l=t.run,x=N()(t,jt);return(0,e.jsx)(M.Q,{modalProps:{title:"\u4E0A\u4F20\u6587\u4EF6",style:{minWidth:800},afterClose:function(){return l(r)}},buttonProps:R()({icon:(0,e.jsx)(Fe.Z,{}),children:"\u4E0A\u4F20",title:"\u4E0A\u4F20"},x),children:(0,e.jsx)(xt,{folder:(0,B.Dy)(r,"/"),region:i})})}var Ft=["files","dir","loading","beforeRequest","afterRequest"];function yt(t){var r=t.files,i=t.dir,l=t.loading,x=t.beforeRequest,C=t.afterRequest,f=N()(t,Ft),d=g.useMemo(function(){return(0,B.Dy)(i,"/","".concat((0,B.Us)(i),".zip"))},[i]),j=g.useState(""),m=Z()(j,2),v=m[0],c=m[1];return g.useEffect(function(){c(d)},[d]),(0,e.jsxs)(M.Q,{modalProps:{title:"\u538B\u7F29\u6587\u4EF6",okText:"\u5F00\u59CB\u538B\u7F29",okButtonProps:{loading:l}},buttonProps:R()({icon:(0,e.jsx)(me.Z,{}),title:"\u538B\u7F29\u6587\u4EF6",children:"\u538B\u7F29 ZIP \u5305",loading:l},f),beforeRequest:x,afterRequest:C,request:D()(y()().mark(function u(){return y()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,P.$R)(r,v);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},u)})),children:[(0,e.jsx)(I.Z,{header:(0,e.jsx)("b",{children:"\u538B\u7F29\u6587\u4EF6\u5217\u8868"}),style:{maxHeight:200,overflow:"auto",margin:20},size:"small",dataSource:r,renderItem:function(s){return(0,e.jsx)(I.Z.Item,{children:s})}}),(0,e.jsx)(A.Z,{addonBefore:"\u538B\u7F29\u6587\u4EF6\u540D",value:v,onChange:function(s){var n;return c((s==null||(n=s.target)===null||n===void 0?void 0:n.value)||"")},style:{width:"100%"}})]})}function Rt(t){var r,i=t.region,l=t.currentPath,x=t.loading,C=t.setLoading,f=t.setLoadingFinished,d=t.cache,j=t.setCache,m=t.showDirSize,v=t.setShowDirSize,c=t.run,u=t.files,s=t.setSelectedFiles,n=t.selectedFiles;return(0,e.jsxs)(b.Z,{direction:"vertical",style:{width:"100%"},children:[(0,e.jsx)(b.Z,{wrap:!0,children:[{path:"/mnt/auto/sd",label:"sd \u6839\u76EE\u5F55"},{path:"/mnt/auto/sd/models/Stable-diffusion",label:"sd \u57FA\u7840\u6A21\u578B(checkpoint)\u76EE\u5F55"},{path:"/mnt/auto/sd/models/Lora",label:"LoRA \u76EE\u5F55"},{path:"/mnt/auto/sd/models/VAE",label:"VAE \u76EE\u5F55"},{path:"/mnt/auto/sd/extensions",label:"\u63D2\u4EF6\u76EE\u5F55"},{path:"/mnt/auto/sd/models/ControlNet",label:"ControlNet \u76EE\u5F55"},{path:"/mnt/auto/sd/outputs",label:"\u56FE\u7247\u751F\u6210\u76EE\u5F55"}].map(function(o){return(0,e.jsx)(et.Z,{style:{cursor:"pointer"},onClick:function(){return c(o.path)},children:o.label},o.label)})}),(0,e.jsxs)(b.Z,{style:{justifyContent:"space-between",width:"100%"},wrap:!0,children:[(0,e.jsxs)(b.Z,{wrap:!0,children:[n.length===0?(0,e.jsx)(w.ZP,{onClick:function(){return s(u.reduce(function(h,F){return R()(R()({},h),{},Y()({},F.path,!0))},{}))},children:"\u5168\u9009"}):(0,e.jsx)(w.ZP,{onClick:function(){return s({})},children:"\u53D6\u6D88\u9009\u62E9"}),(0,e.jsx)(w.ZP,{onClick:function(){return s(R()(R()({},u.reduce(function(h,F){return R()(R()({},h),{},Y()({},F.path,!0))},{})),n.reduce(function(h,F){return R()(R()({},h),{},Y()({},F,!1))},{})))},children:"\u53CD\u9009"}),(0,e.jsx)(yt,{files:n,dir:l,disabled:!(n!=null&&n.length),loading:x,beforeRequest:C,afterRequest:function(h,F){h?E.Z.success({message:"\u538B\u7F29\u6210\u529F"}):E.Z.error({message:"\u538B\u7F29\u5931\u8D25",description:F}),f(),c(l)}}),(0,e.jsx)(w.ZP,{icon:(0,e.jsx)(de.Z,{}),disabled:!(n!=null&&n.length),onClick:function(){return j({file:n,type:"cut"})},children:"\u6279\u91CF\u526A\u5207"}),(0,e.jsx)(w.ZP,{icon:(0,e.jsx)(fe.Z,{}),disabled:!(n!=null&&n.length),onClick:function(){return j({file:n,type:"copy"})},children:"\u6279\u91CF\u590D\u5236"}),(0,e.jsx)(lt,{files:n,disabled:!(n!=null&&n.length),loading:x,beforeRequest:C,afterRequest:function(h,F){h?E.Z.success({message:"\u6279\u91CF\u5220\u9664\u6210\u529F"}):E.Z.error({message:"\u6279\u91CF\u5220\u9664\u5931\u8D25",description:F}),f(),c(l)}})]}),(0,e.jsxs)(b.Z,{wrap:!0,children:[(0,e.jsx)(ve.Z,{checked:m,onChange:function(h){var F;return v((h==null||(F=h.target)===null||F===void 0?void 0:F.checked)||!1)},children:"\u8BA1\u7B97\u6587\u4EF6\u5939\u5927\u5C0F"}),(0,e.jsx)(rt,{loading:x,dir:l,beforeRequest:C,afterRequest:function(h,F){h?E.Z.success({message:"\u521B\u5EFA\u6587\u4EF6\u5939\u6210\u529F"}):E.Z.error({message:"\u521B\u5EFA\u6587\u4EF6\u5939\u5931\u8D25",description:F}),f(),c(l)}}),(0,e.jsx)(st,{disabled:!d||!(d!=null&&(r=d.file)!==null&&r!==void 0&&r.length),pasteType:(d==null?void 0:d.type)||"copy",src:(d==null?void 0:d.file)||[],dstDir:l,loading:x,beforeRequest:C,afterRequest:function(h,F){h?E.Z.success({message:"\u7C98\u8D34\u6210\u529F"}):E.Z.error({message:"\u7C98\u8D34\u5931\u8D25",description:F}),f(),c(l)}}),(0,e.jsx)(Ct,{currentPath:l,region:i,run:c})]})]})]})}function Zt(){var t=g.useState("/mnt/auto"),r=Z()(t,2),i=r[0],l=r[1],x=g.useState(!1),C=Z()(x,2),f=C[0],d=C[1],j=g.useRef({isFirst:!0,refresh:function(){}}),m=ce.Z(function(){var $=D()(y()().mark(function L(z){var V,ee;return y()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,(0,P.C7)(z,f);case 2:return V=H.sent,V.success?l(z):(E.Z.error({message:"\u76EE\u5F55\u4E0D\u5B58\u5728",description:"\u76EE\u5F55 ".concat(z," \u4E0D\u5B58\u5728\uFF0C\u8FD9\u53EF\u80FD\u662F\u56E0\u4E3A\u60A8\u9996\u6B21\u4F7F\u7528\u8FD8\u672A\u521B\u5EFA\u6539\u76EE\u5F55\u3002\u8BE6\u7EC6\u4FE1\u606F\uFF1A").concat(V.errMsg)}),setTimeout(function(){var O=["/mnt/auto/sd","/mnt/auto","/"],Q=O.indexOf(z);switch(Q){case-1:u(O[0]);break;case O.length-1:break;default:u(O[Q+1]);break}},100)),ee=V.files||[],H.abrupt("return",ee.sort(function(O,Q){return O.is_dir&&!Q.is_dir?-1:!O.is_dir&&Q.is_dir?1:O.name.localeCompare(Q.name)}));case 6:case"end":return H.stop()}},L)}));return function(L){return $.apply(this,arguments)}}(),{retryCount:3,manual:!0,refreshDeps:[f]}),v=m.data,c=m.loading,u=m.run;g.useEffect(function(){j.current.refresh=function(){return u(i)}},[u,i]);var s=ne.Z(!1),n=Z()(s,2),o=n[0],h=n[1],F=h.setTrue,W=h.setFalse,U=c||o,se=g.useState(void 0),J=Z()(se,2),q=J[0],_=J[1],G=g.useCallback(function(){var $=document.getElementById("scrollableDiv");$&&($.style.height="".concat(window.innerHeight-$.offsetTop-50,"px"))},[]);g.useEffect(function(){return G()},[]),$e.Z("resize",G);var ie=g.useContext(te._),p=ie.info;g.useEffect(function(){j.current.refresh()},[j,f]),g.useEffect(function(){j.current.isFirst&&((p==null?void 0:p.withNas)===!1?(E.Z.warning({message:"\u672A\u6302\u8F7D NAS",description:"\u8BF7\u5728\u8BBE\u7F6E\u4E2D\u6302\u8F7D NAS \u540E\u4F7F\u7528"}),j.current.isFirst=!1):(p==null?void 0:p.withNas)===!0&&(u(i),j.current.isFirst=!1))},[p==null?void 0:p.withNas,f,u]);var le=g.useState({}),T=Z()(le,2),S=T[0],k=T[1];g.useEffect(function(){k({})},[i]);var K=g.useMemo(function(){return Object.entries(S).filter(function($){var L=Z()($,2),z=L[1];return z}).map(function($){var L=Z()($,1),z=L[0];return z})},[S]);return(0,e.jsx)(Pe.r,{disabled:!(p!=null&&p.withNas),children:(0,e.jsxs)(b.Z,{direction:"vertical",style:{width:"100%"},styles:{item:{width:"100%"}},children:[(0,e.jsx)(_e,{loading:U,currentPath:i,setCurrentPath:u}),(0,e.jsx)(Rt,{region:(p==null?void 0:p.region)||"public",currentPath:i,loading:U,setLoading:F,setLoadingFinished:W,cache:q,setCache:_,showDirSize:f,setShowDirSize:d,run:u,selectedFiles:K,setSelectedFiles:k,files:v||[]}),(0,e.jsx)("div",{id:"scrollableDiv",style:{height:800,overflow:"auto",padding:"0 16px",border:"1px solid rgba(140, 140, 140, 0.35)",background:"white"},children:(0,e.jsx)(I.Z,{dataSource:v,loading:U,size:"small",renderItem:function(L){return(0,e.jsx)(I.Z.Item,{children:(0,e.jsx)(Ke,{file:L,run:u,currentPath:i,showDirSize:f,loading:U,setLoading:F,setLoadingFinished:W,setCache:_,selected:!!(S!=null&&S[L.path]),onSelect:function(V){k(function(ee){return R()(R()({},ee),{},Y()({},L.path,V))})}})})}})})]})})}var ye=a(55617);function pt(){return(0,ye.Q4)(ye.Zl.PAGE_FILEMGR),(0,e.jsx)("div",{style:{padding:20,height:"100%"},children:(0,e.jsx)(Zt,{})})}}}]);
